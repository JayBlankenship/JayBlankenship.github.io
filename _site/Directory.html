
<!DOCTYPE HTML>
<html>
    <head>
    <title>Directory</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
    </head>
    <body class="is-preload">

        <!-- Wrapper -->
            <div id="wrapper">

                <!-- Header -->
                    <header id="header">
                        <a href="index.html" class="logo">Jay Blankenship's Directory</a>
                    </header>

                <!-- Nav -->
                    <nav id="nav">
                        <ul class="links">
                            <li><a href="index.html">Projects</a></li>
                            <li><a href="generic.html">Education</a></li>
                            <li><a href="elements.html">Work experience</a></li>
                            <li><a href="resume.html">Resume</a></li>
                            <li class="active"><a href="Directory.html">Directory</a></li>
                        </ul>
                        <ul class="icons">
                            <li><a href="https://github.com/JayBlankenship?tab=repositories" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
                            <li><a href="https://www.linkedin.com/in/jay-blankenship/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
                        </ul>
                    </nav>
					
                <!-- Main -->
                    <div id="main">
                        <section class="post">
                            <header class="major">
                                <h1>Directory</h1>
                                <p id="loading-message" style="font-size: 0.8em; color: #999; margin-top: 0.5em;">(please await api)</p>
                            </header>
                            <div id="repo-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; margin-top:2em; justify-items: center; align-items: start;">
                                <!-- Repo previews will be injected here -->
                            </div>
                            <style>
                                /* Responsive adjustments for repo grid and card iframes */
                                /* Use flex-based iframe sizing so iframe fills card space and leaves bottom for text */
                                #repo-grid .repo-card { padding: 6px; }
                                #repo-grid .repo-card .iframe-wrap { flex: 1 1 auto; height: auto !important; }
                                @media (max-width: 767px) {
                                    #repo-grid { grid-template-columns: repeat(1, 1fr) !important; gap: 1rem; }
                                    .repo-card { max-width: 100% !important; }
                                    #repo-grid .repo-card .iframe-wrap { min-height: 140px; }
                                }
                                @media (min-width: 768px) and (max-width: 1023px) {
                                    #repo-grid { grid-template-columns: repeat(1, 1fr); }
                                    #repo-grid .repo-card .iframe-wrap { min-height: 180px; }
                                }
                                @media (min-width: 1024px) {
                                    #repo-grid { grid-template-columns: repeat(2, 1fr); }
                                }
                            </style>
                        </section>
                    </div>

                <!-- Footer -->
                    <footer id="footer">
                        <section class="split contact">
                            <section class="alt">
                                <h3>Address</h3>
                                <p>1128 Cary Road  <br />
                                Algonquin, IL 60102</p>
                            </section>
                            <section>
                                <h3>Phone</h3>
                                <p><a href="#">(815) 347-4790</a></p>
                            </section>
                            <section>
                                <h3>Email</h3>
                                <p><a href="#">jayblankenship@outlook.com</a></p>
                            </section>
                            <section>
                                <h3>Social</h3>
                                <ul class="icons">
                                    <li><a href="https://github.com/JayBlankenship?tab=repositories" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
                                    <li><a href="https://www.linkedin.com/in/jay-blankenship/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
                                </ul>
                            </section>
            <script src="assets/js/jquery.min.js"></script>
            <script src="assets/js/jquery.scrollex.min.js"></script>
            <script src="assets/js/jquery.scrolly.min.js"></script>
            <script src="assets/js/browser.min.js"></script>
            <script src="assets/js/breakpoints.min.js"></script>
            <script src="assets/js/util.js"></script>
            <script src="assets/js/main.js"></script>
                    <script>
            async function loadRepos() {
                const grid = document.getElementById('repo-grid');
                const loadingMessage = document.getElementById('loading-message');
                try {
                    const response = await fetch('https://githubprojectdirectory.netlify.app/.netlify/functions/getRepos');
                    const data = await response.json();

                    // Remove loading message once API response is received
                    if (loadingMessage) {
                        loadingMessage.remove();
                    }

                    // Flatten all repos from all categories
                    const repos = [];
                    Object.values(data).forEach(arr => {
                        if (Array.isArray(arr)) {
                            arr.forEach(repo => {
                                // keep repos that have a homepage (used as iframe src)
                                if (repo.homepage) repos.push(repo);
                            });
                        }
                    });

                    // sortMode: 'za' = Zâ†’A (default), 'loaded' = keep original order from the API
                    const sortMode = 'za';

                    if (sortMode === 'za') {
                        repos.sort((a, b) => {
                            const an = (a.name || a.homepage || '').toString().toLowerCase();
                            const bn = (b.name || b.homepage || '').toString().toLowerCase();
                            return bn.localeCompare(an);
                        });
                    }

                    if (repos.length === 0) {
                        grid.innerHTML = '<p>No repositories found.</p>';
                        return;
                    }

                    // Create cards with iframe previews and grey info box below
                    grid.innerHTML = repos.map(repo => {
                        const title = repo.name || repo.homepage;
                        const desc = repo.description ? repo.description : '';
                        const src = repo.homepage;

                        // Special-case: SnakeTest itch.io embed (use provided embed snippet)
                        const lowerTitle = (title || '').toLowerCase();
                        const isSnake = lowerTitle.includes('snaketest') || lowerTitle.includes('snakegame') || (src || '').includes('itch.io/snaketest');
                        if (isSnake) {
                            return `
                                <div class="repo-card" style="width:100%; max-width:420px; box-sizing:border-box; border:1px solid #444; border-radius:12px; overflow:hidden; background:#111; padding:6px; margin:0; display:flex; flex-direction:column; justify-content:flex-start; align-items:stretch;">
                                    <div class="iframe-wrap" style="width:100%; overflow:hidden; border-radius:10px;">
                                        <iframe src="https://itch.io/embed/2314197" width="100%" height="320" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                    <div class="repo-info" style="background:transparent; color:#ddd; padding:0.35rem 1rem; min-height:48px; display:flex; flex-direction:column; justify-content:center; border-bottom-left-radius:12px; border-bottom-right-radius:12px;">
                                        <a href="https://jayblankenship.itch.io/snaketest" target="_blank" style="color:#fff; font-weight:700; font-size:1.1em; margin-bottom:0.25em; text-decoration:none;">SnakeTest</a>
                                        <div style="color:#ccc; font-size:0.95em; line-height:1.25;">${desc}</div>
                                    </div>
                                </div>
                            `;
                        }

                        return `
                            <div class="repo-card" style="width:100%; max-width:420px; box-sizing:border-box; border:1px solid #444; border-radius:12px; overflow:hidden; background:#111; padding:6px; margin:0; display:flex; flex-direction:column; justify-content:flex-start; align-items:stretch;">
                                <div class="iframe-wrap" style="width:100%; overflow:hidden; border-radius:10px;">
                                    <iframe src="${src}" title="${title}" style="width:100%; height:100%; border:0; display:block; border-radius:10px; margin:0;" loading="lazy" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
                                </div>
                                <div class="repo-info" style="background:transparent; color:#ddd; padding:0.35rem 1rem; min-height:48px; display:flex; flex-direction:column; justify-content:center; border-bottom-left-radius:12px; border-bottom-right-radius:12px;">
                                    <a href="${src}" target="_blank" style="color:#fff; font-weight:700; font-size:1.1em; margin-bottom:0.25em; text-decoration:none;">${title}</a>
                                    <div style="color:#ccc; font-size:0.95em; line-height:1.25;">${desc}</div>
                                </div>
                            </div>
                        `;
                    }).join('');

                    // Adjust grid columns for responsiveness via inline styles
                    grid.style.gridTemplateColumns = window.innerWidth >= 1024 ? 'repeat(2, 1fr)' : window.innerWidth >= 600 ? 'repeat(2, 1fr)' : 'repeat(1, 1fr)';

                    // Optional: make iframes resize a bit on smaller screens
                    window.addEventListener('resize', () => {
                        grid.style.gridTemplateColumns = window.innerWidth >= 1024 ? 'repeat(2, 1fr)' : window.innerWidth >= 600 ? 'repeat(2, 1fr)' : 'repeat(1, 1fr)';
                    });

                } catch (e) {
                    // Remove loading message on error as well
                    if (loadingMessage) {
                        loadingMessage.remove();
                    }
                    grid.innerHTML = '<p>Error loading repositories.</p>';
                }
            }
            window.addEventListener('DOMContentLoaded', loadRepos);
            </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HWNKY7SS0C"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HWNKY7SS0C');
</script>


</body>
</html>
